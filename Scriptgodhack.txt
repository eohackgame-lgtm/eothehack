-- Blox Fruits 遊戲狀態監控系統
local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local RunService = game:GetService("RunService")
local Player = Players.LocalPlayer
local PlayerGui = Player:WaitForChild("PlayerGui")

-- 創建主界面
local MainGui = Instance.new("ScreenGui")
MainGui.Name = "BloxFruitsMonitor"
MainGui.Parent = PlayerGui
MainGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

-- 左側菜單欄
local MenuBar = Instance.new("Frame")
MenuBar.Name = "MenuBar"
MenuBar.Size = UDim2.new(0, 80, 1, 0)
MenuBar.Position = UDim2.new(0, 0, 0, 0)
MenuBar.BackgroundColor3 = Color3.fromRGB(30, 30, 40)
MenuBar.BorderSizePixel = 0
MenuBar.Parent = MainGui

-- 情況按鈕 (第一個)
local StatusButton = Instance.new("TextButton")
StatusButton.Name = "StatusButton"
StatusButton.Size = UDim2.new(1, -10, 0, 60)
StatusButton.Position = UDim2.new(0, 5, 0, 10)
StatusButton.BackgroundColor3 = Color3.fromRGB(50, 50, 70)
StatusButton.Text = "情況"
StatusButton.TextColor3 = Color3.fromRGB(255, 255, 255)
StatusButton.TextSize = 16
StatusButton.Font = Enum.Font.GothamBold
StatusButton.Parent = MenuBar

-- EXP按鈕 (第二個)
local ExpButton = Instance.new("TextButton")
ExpButton.Name = "ExpButton"
ExpButton.Size = UDim2.new(1, -10, 0, 60)
ExpButton.Position = UDim2.new(0, 5, 0, 80)
ExpButton.BackgroundColor3 = Color3.fromRGB(50, 50, 70)
ExpButton.Text = "EXP"
ExpButton.TextColor3 = Color3.fromRGB(255, 255, 255)
ExpButton.TextSize = 16
ExpButton.Font = Enum.Font.GothamBold
ExpButton.Parent = MenuBar

-- 內容面板
local ContentPanel = Instance.new("Frame")
ContentPanel.Name = "ContentPanel"
ContentPanel.Size = UDim2.new(1, -90, 1, -20)
ContentPanel.Position = UDim2.new(0, 90, 0, 10)
ContentPanel.BackgroundColor3 = Color3.fromRGB(40, 40, 50)
ContentPanel.BackgroundTransparency = 0.1
ContentPanel.Visible = false
ContentPanel.Parent = MainGui

local PanelCorner = Instance.new("UICorner")
PanelCorner.CornerRadius = UDim.new(0.05, 0)
PanelCorner.Parent = ContentPanel

-- 情況面板內容
local StatusContent = Instance.new("Frame")
StatusContent.Name = "StatusContent"
StatusContent.Size = UDim2.new(1, 0, 1, 0)
StatusContent.Position = UDim2.new(0, 0, 0, 0)
StatusContent.BackgroundTransparency = 1
StatusContent.Visible = false
StatusContent.Parent = ContentPanel

-- 標題
local StatusTitle = Instance.new("TextLabel")
StatusTitle.Name = "StatusTitle"
StatusTitle.Size = UDim2.new(1, 0, 0, 40)
StatusTitle.Position = UDim2.new(0, 0, 0, 0)
StatusTitle.BackgroundTransparency = 1
StatusTitle.Text = "遊戲狀態監控"
StatusTitle.TextColor3 = Color3.fromRGB(255, 255, 255)
StatusTitle.TextSize = 20
StatusTitle.Font = Enum.Font.GothamBold
StatusTitle.Parent = StatusContent

-- 狀態項目容器
local StatusItems = Instance.new("Frame")
StatusItems.Name = "StatusItems"
StatusItems.Size = UDim2.new(1, -40, 1, -60)
StatusItems.Position = UDim2.new(0, 20, 0, 50)
StatusItems.BackgroundTransparency = 1
StatusItems.Parent = StatusContent

-- 創建狀態項目函數
local function CreateStatusItem(name, yPosition)
    local itemFrame = Instance.new("Frame")
    itemFrame.Name = name .. "Item"
    itemFrame.Size = UDim2.new(1, 0, 0, 40)
    itemFrame.Position = UDim2.new(0, 0, 0, yPosition)
    itemFrame.BackgroundColor3 = Color3.fromRGB(50, 50, 60)
    itemFrame.Parent = StatusItems
    
    local itemCorner = Instance.new("UICorner")
    itemCorner.CornerRadius = UDim.new(0.05, 0)
    itemCorner.Parent = itemFrame
    
    local itemLabel = Instance.new("TextLabel")
    itemLabel.Name = "Label"
    itemLabel.Size = UDim2.new(0.7, 0, 1, 0)
    itemLabel.Position = UDim2.new(0, 10, 0, 0)
    itemLabel.BackgroundTransparency = 1
    itemLabel.Text = name
    itemLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
    itemLabel.TextSize = 16
    itemLabel.TextXAlignment = Enum.TextXAlignment.Left
    itemLabel.Font = Enum.Font.Gotham
    itemLabel.Parent = itemFrame
    
    local statusIndicator = Instance.new("Frame")
    statusIndicator.Name = "Indicator"
    statusIndicator.Size = UDim2.new(0, 20, 0, 20)
    statusIndicator.Position = UDim2.new(1, -35, 0.5, -10)
    statusIndicator.BackgroundColor3 = Color3.fromRGB(255, 50, 50) -- 默認紅色
    statusIndicator.Parent = itemFrame
    
    local indicatorCorner = Instance.new("UICorner")
    indicatorCorner.CornerRadius = UDim.new(0.5, 0)
    indicatorCorner.Parent = statusIndicator
    
    return statusIndicator
end

-- 創建狀態項目
local EliteHunterIndicator = CreateStatusItem("精英怪", 0)
local HiddenIslandIndicator = CreateStatusItem("隱藏島", 50)
local VolcanoIslandIndicator = CreateStatusItem("火山島", 100)
local LeviathanIndicator = CreateStatusItem("利維坦島/冰凍維度", 150)
local NineTailedFoxIndicator = CreateStatusItem("九尾狐島", 200)

-- EXP面板內容
local ExpContent = Instance.new("Frame")
ExpContent.Name = "ExpContent"
ExpContent.Size = UDim2.new(1, 0, 1, 0)
ExpContent.Position = UDim2.new(0, 0, 0, 0)
ExpContent.BackgroundTransparency = 1
ExpContent.Visible = false
ExpContent.Parent = ContentPanel

-- EXP面板標題
local ExpTitle = Instance.new("TextLabel")
ExpTitle.Name = "ExpTitle"
ExpTitle.Size = UDim2.new(1, 0, 0, 40)
ExpTitle.Position = UDim2.new(0, 0, 0, 0)
ExpTitle.BackgroundTransparency = 1
ExpTitle.Text = "玩家定位系統"
ExpTitle.TextColor3 = Color3.fromRGB(255, 255, 255)
ExpTitle.TextSize = 20
ExpTitle.Font = Enum.Font.GothamBold
ExpTitle.Parent = ExpContent

-- 開關容器
local ToggleContainer = Instance.new("Frame")
ToggleContainer.Name = "ToggleContainer"
ToggleContainer.Size = UDim2.new(1, -40, 0, 60)
ToggleContainer.Position = UDim2.new(0, 20, 0, 60)
ToggleContainer.BackgroundTransparency = 1
ToggleContainer.Parent = ExpContent

-- 開關標籤
local ToggleLabel = Instance.new("TextLabel")
ToggleLabel.Name = "ToggleLabel"
ToggleLabel.Size = UDim2.new(0.7, 0, 1, 0)
ToggleLabel.Position = UDim2.new(0, 0, 0, 0)
ToggleLabel.BackgroundTransparency = 1
ToggleLabel.Text = "顯示玩家位置"
ToggleLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
ToggleLabel.TextSize = 16
ToggleLabel.TextXAlignment = Enum.TextXAlignment.Left
ToggleLabel.Font = Enum.Font.Gotham
ToggleLabel.Parent = ToggleContainer

-- 開關按鈕
local ToggleButton = Instance.new("TextButton")
ToggleButton.Name = "ToggleButton"
ToggleButton.Size = UDim2.new(0, 50, 0, 30)
ToggleButton.Position = UDim2.new(1, -50, 0.5, -15)
ToggleButton.BackgroundColor3 = Color3.fromRGB(80, 80, 80)
ToggleButton.Text = ""
ToggleButton.Parent = ToggleContainer

local ToggleCorner = Instance.new("UICorner")
ToggleCorner.CornerRadius = UDim.new(0.5, 0)
ToggleCorner.Parent = ToggleButton

-- 開關指示器
local ToggleIndicator = Instance.new("Frame")
ToggleIndicator.Name = "ToggleIndicator"
ToggleIndicator.Size = UDim2.new(0, 20, 0, 20)
ToggleIndicator.Position = UDim2.new(0, 5, 0.5, -10)
ToggleIndicator.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
ToggleIndicator.Parent = ToggleButton

local IndicatorCorner = Instance.new("UICorner")
IndicatorCorner.CornerRadius = UDim.new(0.5, 0)
IndicatorCorner.Parent = ToggleIndicator

-- 狀態顯示
local PlayerTrackerStatus = Instance.new("TextLabel")
PlayerTrackerStatus.Name = "PlayerTrackerStatus"
PlayerTrackerStatus.Size = UDim2.new(1, -40, 0, 30)
PlayerTrackerStatus.Position = UDim2.new(0, 20, 0, 140)
PlayerTrackerStatus.BackgroundTransparency = 1
PlayerTrackerStatus.Text = "狀態: 關閉"
PlayerTrackerStatus.TextColor3 = Color3.fromRGB(255, 100, 100)
PlayerTrackerStatus.TextSize = 14
PlayerTrackerStatus.Font = Enum.Font.Gotham
PlayerTrackerStatus.Parent = ExpContent

-- 玩家追蹤變量
local PlayerTrackingEnabled = false
local PlayerTrackers = {}

-- 切換玩家追蹤
local function TogglePlayerTracking()
    PlayerTrackingEnabled = not PlayerTrackingEnabled
    
    if PlayerTrackingEnabled then
        -- 開啟狀態
        TweenService:Create(ToggleIndicator, TweenInfo.new(0.2), {
            Position = UDim2.new(1, -25, 0.5, -10),
            BackgroundColor3 = Color3.fromRGB(0, 255, 0)
        }):Play()
        TweenService:Create(ToggleButton, TweenInfo.new(0.2), {
            BackgroundColor3 = Color3.fromRGB(0, 100, 0)
        }):Play()
        PlayerTrackerStatus.Text = "狀態: 開啟 - 顯示所有玩家位置"
        PlayerTrackerStatus.TextColor3 = Color3.fromRGB(0, 255, 0)
        
        -- 創建玩家追蹤器
        CreatePlayerTrackers()
    else
        -- 關閉狀態
        TweenService:Create(ToggleIndicator, TweenInfo.new(0.2), {
            Position = UDim2.new(0, 5, 0.5, -10),
            BackgroundColor3 = Color3.fromRGB(255, 255, 255)
        }):Play()
        TweenService:Create(ToggleButton, TweenInfo.new(0.2), {
            BackgroundColor3 = Color3.fromRGB(80, 80, 80)
        }):Play()
        PlayerTrackerStatus.Text = "狀態: 關閉"
        PlayerTrackerStatus.TextColor3 = Color3.fromRGB(255, 100, 100)
        
        -- 移除玩家追蹤器
        RemovePlayerTrackers()
    end
end

-- 創建玩家追蹤器
local function CreatePlayerTrackers()
    -- 先清除現有追蹤器
    RemovePlayerTrackers()
    
    -- 為每個玩家創建追蹤器
    for _, player in pairs(Players:GetPlayers()) do
        if player ~= Player then
            local tracker = Instance.new("BillboardGui")
            tracker.Name = player.Name .. "Tracker"
            tracker.Size = UDim2.new(0, 50, 0, 50)
            tracker.AlwaysOnTop = true
            tracker.Enabled = true
            
            local frame = Instance.new("Frame")
            frame.Size = UDim2.new(1, 0, 1, 0)
            frame.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
            frame.BackgroundTransparency = 0.3
            frame.BorderSizePixel = 0
            frame.Parent = tracker
            
            local corner = Instance.new("UICorner")
            corner.CornerRadius = UDim.new(0.5, 0)
            corner.Parent = frame
            
            local label = Instance.new("TextLabel")
            label.Size = UDim2.new(1, 0, 1, 0)
            label.BackgroundTransparency = 1
            label.Text = player.Name
            label.TextColor3 = Color3.fromRGB(255, 255, 255)
            label.TextSize = 10
            label.Font = Enum.Font.GothamBold
            label.Parent = tracker
            
            -- 如果玩家有角色，將追蹤器附加到頭部
            if player.Character and player.Character:FindFirstChild("Head") then
                tracker.Adornee = player.Character.Head
                tracker.Parent = player.Character.Head
            end
            
            PlayerTrackers[player] = tracker
        end
    end
end

-- 移除玩家追蹤器
local function RemovePlayerTrackers()
    for player, tracker in pairs(PlayerTrackers) do
        if tracker then
            tracker:Destroy()
        end
    end
    PlayerTrackers = {}
end

-- 玩家加入遊戲時創建追蹤器
Players.PlayerAdded:Connect(function(player)
    if PlayerTrackingEnabled then
        wait(1) -- 等待玩家加載
        CreatePlayerTrackers()
    end
end)

-- 玩家離開遊戲時移除追蹤器
Players.PlayerRemoving:Connect(function(player)
    if PlayerTrackers[player] then
        PlayerTrackers[player]:Destroy()
        PlayerTrackers[player] = nil
    end
end)

-- 角色加載時更新追蹤器
local function onCharacterAdded(character)
    if PlayerTrackingEnabled then
        wait(1) -- 等待角色加載
        CreatePlayerTrackers()
    end
end

Player.CharacterAdded:Connect(onCharacterAdded)

-- 檢查遊戲狀態
local function CheckGameStatus()
    while true do
        -- 這裡是模擬檢查，實際遊戲中你需要根據遊戲結構進行真實檢查
        
        -- 精英怪檢查 (模擬)
        local hasEliteHunter = math.random(1, 10) > 7 -- 30% 機率有精英怪
        EliteHunterIndicator.BackgroundColor3 = hasEliteHunter and Color3.fromRGB(0, 255, 0) or Color3.fromRGB(255, 50, 50)
        
        -- 隱藏島檢查 (模擬)
        local hasHiddenIsland = math.random(1, 10) > 5 -- 50% 機率有隱藏島
        HiddenIslandIndicator.BackgroundColor3 = hasHiddenIsland and Color3.fromRGB(0, 255, 0) or Color3.fromRGB(255, 50, 50)
        
        -- 火山島檢查 (模擬)
        local hasVolcanoIsland = math.random(1, 10) > 3 -- 70% 機率有火山島
        VolcanoIslandIndicator.BackgroundColor3 = hasVolcanoIsland and Color3.fromRGB(0, 255, 0) or Color3.fromRGB(255, 50, 50)
        
        -- 利維坦島檢查 (模擬)
        local hasLeviathan = math.random(1, 10) > 8 -- 20% 機率有利維坦島
        LeviathanIndicator.BackgroundColor3 = hasLeviathan and Color3.fromRGB(0, 255, 0) or Color3.fromRGB(255, 50, 50)
        
        -- 九尾狐島檢查 (模擬)
        local hasNineTailedFox = math.random(1, 10) > 6 -- 40% 機率有九尾狐島
        NineTailedFoxIndicator.BackgroundColor3 = hasNineTailedFox and Color3.fromRGB(0, 255, 0) or Color3.fromRGB(255, 50, 50)
        
        wait(5) -- 每5秒檢查一次
    end
end

-- 按鈕點擊事件
StatusButton.MouseButton1Click:Connect(function()
    ContentPanel.Visible = true
    StatusContent.Visible = true
    ExpContent.Visible = false
end)

ExpButton.MouseButton1Click:Connect(function()
    ContentPanel.Visible = true
    StatusContent.Visible = false
    ExpContent.Visible = true
end)

ToggleButton.MouseButton1Click:Connect(TogglePlayerTracking)

-- 啟動狀態檢查
task.spawn(CheckGameStatus)

-- 初始通知
task.spawn(function()
    wait(2)
    game.StarterGui:SetCore("SendNotification", {
        Title = "Blox Fruits 監控系統",
        Text = "加載完成！使用左側菜單查看遊戲狀態",
        Duration = 5
    })
end)
local lastNotificationTime = 0
local notificationCooldown = 10
local currentTime = tick()
if currentTime - lastNotificationTime >= notificationCooldown then
    game.StarterGui:SetCore("SendNotification", {
        Title = "eoHub",
        Text = "成功運行，祝你早日被封",
        Duration = 999
    })
    lastNotificationTime = currentTime
end